#pragma once
#include "tzmemory.h"
#include "tzinput.h"
#include "tzgraphics.h"
#include "tzrendering.h"

,
    RENDERING = 1 << 1
  };
  
  void init(const size_t main_memory_size, const size_t frame_memory_size, SystemFlags flags);
  void deinit();

  // allocates on the permanent memory buffer
  inline void* allocate(size_t size, size_t align = TZ_DEFAULT_ALIGN);
  
  // allocates on the per-frame memory buffer that is cleared each frame
  inline void* frame_allocate(size_t size, size_t align = TZ_DEFAULT_ALIGN);

  struct GameState
  {
    Buffer full_memory;
    Buffer main_memory;
    FrameDataBuffer frame_memory;
  
    SystemFlags flags;
  };
  
  extern GameState g_game_state;
  
  // resets the frame memory buffer
  void frame();
}
